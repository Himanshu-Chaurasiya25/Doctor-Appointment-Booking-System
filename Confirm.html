<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Booking Confirmed | HealthSync</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: { colors: { "primary": "#2c879b", "background-light": "#f6f7f8" }, fontFamily: { "display": ["Manrope", "sans-serif"] } },
            },
        }
    </script>
    <style>
        .material-symbols-outlined { font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 48; }
        body { font-family: 'Manrope', sans-serif; }
        .jagged-border { position: relative; }
        .jagged-border:after {
            content: ""; display: block; position: absolute; bottom: -10px; left: 0; width: 100%; height: 10px;
            background: linear-gradient(45deg, transparent 33.333%, #ffffff 33.333%, #ffffff 66.667%, transparent 66.667%), 
                        linear-gradient(-45deg, transparent 33.333%, #ffffff 33.333%, #ffffff 66.667%, transparent 66.667%);
            background-size: 20px 20px;
        }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .animate-pop { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
    </style>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">

    <header class="bg-white border-b border-gray-200 px-6 lg:px-20 py-4 shadow-sm">
        <div class="max-w-[1400px] mx-auto flex items-center justify-between">
            <a href="index.html" class="flex items-center gap-3 cursor-pointer">
                <div class="bg-primary p-2 rounded-lg text-white">
                    <span class="material-symbols-outlined block text-sm">health_metrics</span>
                </div>
                <h2 class="text-xl font-extrabold tracking-tight text-primary">HealthSync</h2>
            </a>
            <nav class="hidden md:flex items-center gap-10">
                <a class="text-sm font-semibold hover:text-primary transition-colors cursor-pointer" href="index.html">Home</a>
                <a class="text-sm font-semibold hover:text-primary transition-colors cursor-pointer" href="appointments.html?tab=pending">Appointments Pending</a>
                <a class="text-sm font-semibold hover:text-primary transition-colors cursor-pointer" href="appointments.html?tab=history">History</a>
            </nav>
        </div>
    </header>

    <div class="flex-1 flex items-center justify-center p-4">
        <div class="max-w-md w-full animate-pop">
            <div class="flex justify-center mb-6">
                <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30">
                    <span class="material-symbols-outlined text-white text-5xl">check</span>
                </div>
            </div>

            <div class="text-center mb-6">
                <h1 class="text-2xl font-extrabold text-gray-900">Booking Confirmed!</h1>
                <p class="text-gray-500 text-sm mt-1">We have sent a confirmation email to you.</p>
            </div>

            <div class="bg-white rounded-2xl shadow-xl overflow-hidden relative jagged-border mb-8">
                <div class="bg-primary/5 p-6 border-b border-dashed border-gray-200 text-center">
                    <p class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-1">Booking ID</p>
                    <p class="text-xl font-mono font-bold text-primary" id="bookingId">#HS-0000</p>
                </div>
                <div class="p-6">
                    <div class="flex items-center gap-4 mb-6">
                        <div id="docAvatar" class="w-16 h-16 rounded-xl bg-gray-200 bg-cover bg-center shadow-sm"></div>
                        <div>
                            <h2 class="font-bold text-lg text-gray-900" id="docName">Loading...</h2>
                            <p class="text-primary text-sm font-medium" id="docSpecialty">Loading...</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-gray-50 p-3 rounded-lg border border-gray-100">
                            <p class="text-xs text-gray-400 uppercase font-bold mb-1">Date</p>
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-gray-400 text-sm">calendar_month</span>
                                <p class="font-bold text-gray-800" id="confDate">--</p>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg border border-gray-100">
                            <p class="text-xs text-gray-400 uppercase font-bold mb-1">Time</p>
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-gray-400 text-sm">schedule</span>
                                <p class="font-bold text-gray-800" id="confTime">--</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="border-t border-dashed border-gray-200 my-4"></div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm text-gray-500">
                            <span>Consultation Fee</span>
                            <span>₹1500.00</span>
                        </div>
                        <div class="flex justify-between text-sm text-gray-500">
                            <span>Booking Fee</span>
                            <span>₹100.00</span>
                        </div>
                        <div class="flex justify-between text-lg font-extrabold text-gray-900 mt-2 pt-2">
                            <span>Total Paid</span>
                            <span class="text-primary">₹1600.00</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex flex-col gap-3">
                <button onclick="window.print()" class="w-full bg-white text-gray-700 border border-gray-200 py-3 rounded-xl font-bold hover:bg-gray-50 transition-all flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-sm">print</span> Download Receipt
                </button>
                <a href="appointments.html?tab=pending" class="block w-full bg-primary text-white py-3 rounded-xl font-bold hover:brightness-110 shadow-lg shadow-primary/30 transition-all text-center">
                    View My Appointments
                </a>
            </div>
        </div>
    </div>

    <script>
        const doctorsData = [
            { id: 1, name: "Dr. Sarah Chen", specialty: "Cardiologist", location: "San Francisco, CA", image: "https://images.unsplash.com/photo-1559839734-2b71ea197ec2?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 2, name: "Dr. Michael Roberts", specialty: "Dermatologist", location: "Palo Alto, CA", image: "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 3, name: "Dr. Elena Rodriguez", specialty: "Pediatrician", location: "Berkeley, CA", image: "https://images.unsplash.com/photo-1594824476967-48c8b964273f?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 4, name: "Dr. Sophia Patel", specialty: "Neurologist", location: "San Mateo, CA", image: "https://images.unsplash.com/photo-1614608682850-e0d6ed316d47?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 5, name: "Dr. David Kim", specialty: "Orthopedic Surgeon", location: "San Francisco, CA", image: "https://images.unsplash.com/photo-1622253692010-333f2da6031d?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 6, name: "Dr. James Wilson", specialty: "General Surgeon", location: "Oakland, CA", image: "https://images.unsplash.com/photo-1537368910025-700350fe46c7?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 7, name: "Dr. Emily White", specialty: "Dentist", location: "Daly City, CA", image: "https://images.unsplash.com/photo-1527613426441-4da17471b66d?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 8, name: "Dr. Alan Grant", specialty: "Endocrinologist", location: "San Francisco, CA", image: "https://images.unsplash.com/photo-1582750433449-648ed127bb54?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 9, name: "Dr. Linda Lee", specialty: "Optometrist", location: "San Jose, CA", image: "https://images.unsplash.com/photo-1651008325506-e772bd4359d9?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 10, name: "Dr. Robert Stark", specialty: "Cardiologist", location: "Fremont, CA", image: "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 11, name: "Dr. Amanda Waller", specialty: "Psychiatrist", location: "Berkeley, CA", image: "https://images.unsplash.com/photo-1559839734-2b71ea197ec2?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 12, name: "Dr. Strange", specialty: "Neurosurgeon", location: "New York, NY", image: "https://images.unsplash.com/photo-1622253692010-333f2da6031d?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 13, name: "Dr. Banner", specialty: "Radiologist", location: "Dayton, OH", image: "https://images.unsplash.com/photo-1537368910025-700350fe46c7?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 14, name: "Dr. Quinn", specialty: "General Practitioner", location: "Colorado Springs", image: "https://images.unsplash.com/photo-1594824476967-48c8b964273f?auto=format&fit=crop&q=80&w=300&h=300" },
            { id: 15, name: "Dr. House", specialty: "Diagnostician", location: "Princeton, NJ", image: "https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?auto=format&fit=crop&q=80&w=300&h=300" }
        ];

        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const docId = parseInt(urlParams.get('id'));
            const date = urlParams.get('date');
            const time = urlParams.get('time');
            const doctor = doctorsData.find(d => d.id === docId);

            if (doctor && date && time) {
                document.getElementById('docName').innerText = doctor.name;
                document.getElementById('docSpecialty').innerText = doctor.specialty;
                document.getElementById('docAvatar').style.backgroundImage = `url('${doctor.image}')`;
                document.getElementById('confDate').innerText = date;
                document.getElementById('confTime').innerText = time;
                
                const sessionKey = `booked_${docId}_${date}_${time}`;
                if (!sessionStorage.getItem(sessionKey)) {
                    const randomId = Math.floor(1000 + Math.random() * 9000);
                    const bookingId = `#HS-${randomId}`;
                    document.getElementById('bookingId').innerText = bookingId;

                    const newBooking = {
                        bookingId: bookingId,
                        doctorId: docId,
                        doctorName: doctor.name,
                        specialty: doctor.specialty,
                        location: doctor.location,
                        image: doctor.image,
                        date: date,
                        time: time,
                        status: 'pending',
                        timestamp: new Date().getTime()
                    };

                    const existingBookings = JSON.parse(localStorage.getItem('healthSyncAppointments') || '[]');
                    existingBookings.push(newBooking);
                    localStorage.setItem('healthSyncAppointments', JSON.stringify(existingBookings));
                    sessionStorage.setItem(sessionKey, 'true');
                } else {
                    document.getElementById('bookingId').innerText = "#HS-SAVED";
                }
            }
        };
    </script>
</body>
</html>